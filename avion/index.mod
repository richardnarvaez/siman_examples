BEGIN;
    
    CREATE: EX(3,2):MARK(1);
    ASSIGN: A(2)=1:NEXT(CONTADOR);
    
    CREATE: EX(4,1):MARK(1);
    ASSIGN:A(2)=2:NEXT(CONTADOR);
    
    CONTADOR    ASSIGN:A(5)=0;
                ASSIGN:A(6)=EX(5,1);
    
    TALLERM     ASSIGN:A(3)=1;
                ASSIGN:A(5)=A(5)+1;
    
    QUEUE,1;
    
    SEIZE,A(2):TALLERMANTENIMIENTO;
    DELAY:EX(6,1);
    RELEASE:TALLERMANTENIMIENTO;
    
    TRACTOR QUEUE,2:MARK(4);
    SEIZE:REMOLQUE;
    TALLY:A(2),INT(4);
    DELAY:A(6);
    RELEASE:REMOLQUE;
    
    BRANCH, 1:
        IF, A(3) .EQ. 1, TALLERP:
        IF, A(3) .EQ. 2, TALLERM:
        IF, A(3) .EQ. 3, COMPARARPISTA;
    
    TALLERP QUEUE,3;
    SEIZE:TALLERPRUEBA;
    DELAY:EX(A(2),1);
    RELEASE:TALLERPRUEBA;
    
    ASSIGN:A(3)=2;
    
    BRANCH,1:
        IF,A(2) . EQ. 1, COMPARARB:
        ELSE, COMPARAREX;
        COMPARARB BRANCH,1:
        WITH, 0.25, TRACTOR:
        WITH, 0.75, COMPARANAVE;
    
    COMPARANAVE BRANCH,1:
        IF,A(5) .EQ. 1, CONTADORNAVE:
        ELSE, NAVEPRINCIPAL;
    
    CONTADORNAVE COUNT:3,1:NEXT(NAVEPRINCIPAL);
        NAVEPRINCIPAL DELAY:EX(8,4);
        COUNT:1,1: DISPOSE;
        COMPARAREX BRANCH,1:
        WITH, 0.30, TRACTOR:
        WITH, 0.70, TRACTORCOMPARARPISTA;
    
    TRACTORCOMPARARPISTA ASSIGN: A(6)= EX(7,1);
    ASSIGN: A(3)=3:NEXT(TRACTOR);
    
    COMPARARPISTA BRANCH,1:
        IF,A(5) .EQ. 1, CONTADORPISTA :
        ELSE, PISTAPRINCIPAL;
        CONTADORPISTA COUNT: 4, 1: NEXT(PISTAPRINCIPAL);
        PISTAPRINCIPAL COUNT: 2,1;
        TALLY: 3, INT(1):DISPOSE;
END;